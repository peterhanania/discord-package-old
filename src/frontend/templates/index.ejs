<!DOCTYPE html>
<html>
  <head>
    <meta
      http-equiv="Content-Security-Policy"
      content="upgrade-insecure-requests"
    />
    <meta http-equiv="X-UA-Compatible" content="IE=edge" />
    <meta name="theme-color" content="#36393f" />
    <meta property="og:locale" content="en_US" />
    <meta property="og:type" content="website" />
    <meta property="og:title" content="Discord Package" />
    <meta
      property="og:description"
      content="A more detailed discord data package explorer inspired by https://ddpe.androz2091.fr/.  Very easy to host, does not store any information about the user ."
    />
    <link
      href="https://cdn.jsdelivr.net/npm/bootstrap@5.1.0/dist/css/bootstrap.min.css"
      type="text/css"
    />
    <meta
      name="description"
      content="A more detailed discord data package explorer inspired by https://ddpe.androz2091.fr/.  Very easy to host, does not store any information about the user ."
    />
    <script
      src="http://ajax.googleapis.com/ajax/libs/jquery/1.7.1/jquery.min.js"
      type="text/javascript"
    ></script>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width,initial-scale=1" />
    <title>Discord Package</title>
    <link rel="stylesheet" href="/css/style.css" type="text/css" />
    <script src="//cdn.jsdelivr.net/npm/sweetalert2@11"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/bounce.js/0.8.2/bounce.js"></script>
    <link
      rel="stylesheet"
      href="https://cdnjs.cloudflare.com/ajax/libs/noty/3.1.4/noty.min.css"
      type="text/css"
    />
    <script src="https://cdnjs.cloudflare.com/ajax/libs/noty/3.1.4/noty.min.js"></script>
  </head>
  <body>
    <noscript>
      <div class="no-js">
        Please enable javascript in your browser
      </div>
    </noscript>
    <script type="text/javascript">
      var preload = document.createElement('div')
      preload.className = 'load'
      preload.innerHTML = `<div class="spinner"><div class="cube1"></div><div class="cube2"></div></div>`
      document.body.appendChild(preload)
      window.addEventListener('load', function () {
        preload.className += ' fade'
        setTimeout(function () {
          preload.style.display = 'none'
        }, 600)
      })
    </script>
    <div class="page">
      <div class="header">
        <a href="/"><h1>Discord Package</h1></a>
        <p>
          A detailed discord data package explorer
        </p>
      </div>
    </div>
    <div class="settings_popup_box" id="settings">
      <div class="content-div">
        <div class="title">
          <span>SETTINGS</span>
          <button type="button" onclick="close_popup_box()">
            <div aria-hidden="true">
              <svg width="16" height="16" viewBox="0 0 16 16" fill="none">
                <path
                  d="M13 3L3 13M3 3L13 13"
                  stroke="currentColor"
                  stroke-width="2"
                  stroke-linecap="round"
                  stroke-linejoin="round"
                ></path>
              </svg>
            </div>
          </button>
        </div>
        <div class="theme">
          <span class="title">THEME</span>
          <div class="toggles">
            <div class="toggle">
              <input
                type="radio"
                name="theme"
                id="dark"
                value="dark"
                onchange="handleTheme()"
              />
              <label for="dark">Dark</label>
            </div>
            <div class="toggle">
              <input
                type="radio"
                name="theme"
                id="light"
                value="light"
                onchange="handleTheme()"
              />
              <label for="light">Light</label>
            </div>
          </div>
        </div>
        <div class="other">
          <span class="title">OTHER</span>
          <div class="toggle">
            <input type="checkbox" id="credits" onchange="handleCredits()" />
            <label for="credits">Show Credits</label>
          </div>
          <div class="toggle">
            <input type="checkbox" id="alert" onchange="handleAlert()" />
            <label for="alert">Show Alert on Load</label>
          </div>
        </div>
      </div>
      <div class="settings-footer">
        <button onclick="close_popup_box()">Close</button>
      </div>
    </div>
    <div class="alert" id="loading-text"></div>
    <div class="upload">
      <form action="/api/upload" method="post" enctype="multipart/form-data">
        <label for="upload" class="upload-label"></label>
        <input
          name="file"
          type="file"
          id="upload"
          class="file-upload"
          accept=".zip"
        />
      </form>
    </div>
    <div class="loading">
      <div class="spinner">
        <div class="cube1"></div>
        <div class="cube2"></div>
      </div>
    </div>
    <div class="footer">
      <p id="credits-footer">
        Made by <a href="https://botlix.org">botlix.org</a>
      </p>
      <div class="links">
        <span><a href="/">Source code</a></span>
        <span>|</span>
        <span id="settings-text">Settings</span>
        <span>|</span>
        <span><a href="/">About</a></span>
        <span>|</span>
        <span><a href="/">Guide</a></span>
      </div>
    </div>
  </body>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/jszip/3.7.1/jszip.min.js"></script>
  <script src="/js/settings.js"></script>
  <script src="/js/script.js"></script>
  <script src="https://unpkg.com/@popperjs/core@2/dist/umd/popper.min.js"></script>
  <script src="https://unpkg.com/tippy.js@6/dist/tippy-bundle.umd.js"></script>
  <script src="https://unpkg.com/@popperjs/core@2"></script>
  <script src="https://unpkg.com/tippy.js@6"></script>
</html>
<% if(user) { %>
<script>
  $('form').hide()
  $('#loading-text').html(`
  <p>Your data is already uploaded</p>
  <a href="/statistics"><button id="data">My Statistics</button></a>
  <a href="/statistics?reset=true"><button class="reset">Reset</button></a>
`)
  tippy('#data', {
    content: 'View your statistics',
    placement: 'bottom',
    maxWidth: 200
  })
  tippy('.reset', {
    content: 'This Will delete your data allowing you to upload a new zip file',
    placement: 'bottom',
    maxWidth: 200
  })
</script>
<% } %>
